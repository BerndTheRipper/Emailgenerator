<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Fake-E-Mail-generator</title>
	<script>
		window.onload = () => {
			document.querySelector("form").onsubmit = formSubmitted;
		}

		async function formSubmitted(e) {
			e.preventDefault();
			let components = {
				firstNames: [],
				lastNames: [],
				slds: [],
				tlds: []
			};

			let outputCombos = [];
			let outputAmount = parseInt(temp1.outputAmount.value);

			for (let fileHandle of e.target.children) {
				if (fileHandle.type != "file") continue;
				if (!fileHandle.files.length) throw new Error("Doesn't contain files");
				let file = fileHandle.files[0];
				let fileContents = await file.text();
				components[fileHandle.name] = fileContents.split("\n");
			}

			for (let i = 0; i < outputAmount; i++) {
				let indexes = {
					firstNames: Math.floor(Math.random() * components.firstNames.length),
					lastNames: Math.floor(Math.random() * components.lastNames.length),
					slds: Math.floor(Math.random() * components.slds.length),
					tlds: Math.floor(Math.random() * components.tlds.length)
				}

				let indexString = "";
				for (let value of indexes) {
					indexString += value + ",";
				}

				//Already exists
				if (outputCombos.includes(indexString)) {
					i--;
					continue;
				}

				outputCombos.push(components.firstNames[indexes.firstNames] + "." + components.lastNames[indexes.lastNames] + "@" + components.slds[indexes.slds] + "." + components.tlds[indexes.tlds]);
			}

		}

		addElementToList(list, text){
			let li = document.
			//TODO continue here
		}
	</script>
</head>

<body>
	<form>
		<input type="file" name="firstNames" id="firstNamesFileInput"><br>
		<input type="file" name="lastNames" id="lastNamesFileInput"><br>
		<input type="file" name="slds" id="sldsFileInput"><br>
		<input type="file" name="tlds" id="tldsFileInput"><br>
		<input type="number" name="outputAmount" id="amountInput" min="0"><br>
		<input type="submit" value="Submit">
	</form>
	<ul id="output">
	</ul>
</body>

</html>